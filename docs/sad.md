# Software Architecture Document (Описание Архитектуры)

## 1. Introduction (Введение)  
*[Введение предоставляет обзор на весь документ в целом и включает в себя следующие разделы - назначение, область применения, определения и аббревиатуры, ссылки и обзор.]*

### 1.1 Purpose 
*[Данный документ описывает архитектуру приложения как набор точек зрения на неё - use case view, logical view, process view, deployment view, implementation view (может быть стоит перевести названия?). Взаимодействие элементов разных точек зрения представлено в виде UML-диаграмм.]*
*[Укажите назначение данного документа.]*

Этот документ содержит полный архитектурный обзор системы, используя ряд различных архитектурных видов для описания различных аспектов системы. Он предназначен для того, чтобы запечатлеть и передать важные архитектурные решения, которые были приняты в системе.

### 1.2 Scope (Область применения)
*[Приведите краткое описание области применения данного документа, к какому(им) проекту(ам) он относится, кем будет использоваться и т.д.]*

Этот документ по архитектуре программного обеспечения содержит архитектурный обзор системы Сивилла. Система Сивилла, обрабатывающая поступающие данные, выносит результирующее число в Психопаспорт. Также данная система выносит окончательное решение о допустимых мерах воздействия на преступника в случае его задержания, руководствуясь коэффициентом преступности.

### 1.3 Definitions, Acronyms and Abbreviations (Определения и аббревиатуры)
*[Укажите значение терминов и аббревиатур, которые употребляются в данном документе. Возможно указание ссылки на Глоссарий проекта.]*

См. глоссарий

### 1.4 References (Ссылки)
*[Перечислите списком названия документов, на которые ссылаетесь в данном, укажите их источники.]*

[Документ архитектуры программного обеспечения](http://dit.isuct.ru/Publish_RUP/index.htm#core.base_rup/workproducts/rup_software_architecture_document_C367485C.html)  
[Глоссарий](https://github.com/FF220v/ITMO-Psychopass-Team/blob/master/docs/glossary_template.md)

## 2. Architectural Representation (Представление архитектуры)
*[Данный раздел описывает в общем архитектуру системы. Укажите, какие типы диаграмм необходимы для описания разных точек зрения. Рекомендуется воспользоваться следующей таблицей:]*

Для документирования архитектуры системы Civilla необходимы следующие представления:
* Use Case view
* Logical View
* Process view 
* Implementation view 
* Deployment view  
  
## 3. Architectural Goals and Constraints (Цели и ограничения архитектуры)
*[Перечислите здесь все архитектурно-значимые факторы - важные прецеденты, специфичные требования к работе системы и т.д.]*  

В этом разделе описаны требования и задачи программного обеспечения, которые оказывают значительное влияние на архитектуру.

В состав системы входят следующие сервисы с соответствующим функционалом:

Civilla - Video - сбор информации о психопаспортах.  
Civilla - Database - хранение информации о психопаспортах.  
Civilla - Analysis - обработка информации, вынесение решения о допустимой мере пресечения преступлений.  
Civilla - Notification Service - сервис для оповещения инспекторам, исполнителям о повышенном коэффициенте гражданина.  
Civilla - Police Control - сервис авторизации и оповещения полиции.  
Civilla - Dominator Service - сервис разрешения доступа к применинию оружия (в соответствии с коэф. преступности).  

Требования будем предъявлять к каждой части системы в отдельности.

### 3.1.1 Civilla - Video

- Сервис должен собирать информацию о психопаспортах 
- Сервис должен загружать информацию в Civilla - Database.

### 3.1.2 Civilla - Database

- Сервис должнен хранить информацию о психопаспортах граждан.
- Выдавать информацию по требованию.
- Принимать и сохранять информацию по требованию.

### 3.1.3 Civilla - Analysis

- Сервис должен брать информацию из Civilla - Database.
- Сервис должен обрабатывать информацию, вычислять коэфициент преступности.
- Сервис должен сохранять результаты обработки в Civilla - Database.

### 3.1.4 Civilla - Notifications Service

- Сервис должен оповещать инспекторам, исполнителям о повышенном коэффициенте у гражданина.

### 3.1.5 Civilla - Police Control

- Сервис должен позволять хранить учетные записи персонала полиции.
- Сервис должен присылать оповещения персоналу при наступлении событий, заданных аналитиком.
- Сервис должен присылать оповещения при возникновении гражданина с коэф. преступности выше порогового.

### 3.1.6 Civilla - Dominator Service

- Сервис должен отправлять данные на обработку а Civilla - Analysis и получать ответ.
- Сервис должен на основании ответа от Civilla - Analysis корректно управлять табельным оружием.

## 3.2 Usability (Требования к удобству использования)

Опишем требования только к частям системы, которые пользователи используют напрямую.

### 3.2.1 Civilla - Police Control

- Система должна использовать мессенджеры, используемые пользователями, в качестве систем оповещения.
- Система должна поддерживать регистрацию пользователей путём отправки сообщения в мессенджер.
- Система должна поддерживать авторизацию пользователей путём отправки сообщения в мессенджер.
- Система должна позволять задавать правила для отправки оповещений путём отправки авторизованным аналитиком сообщения с командой в мессенджер. 

## 3.3 Требования к доступности

- Система должна быть доступна 24/7 в случае, если это позволяет интернет-соединение пользователя.  

## 3.4 Performance (Требования к производительности)
 
### 3.4.1 Требование к времени ответа.

- Система должна отвечать так скоро, как позволяет интернет-соединение клиента. Задержка со стороны системы, вызванная её нагруженностью, не может превышать 1 секунды.

### 3.4.2 Требование к количеству пользователей, работающих одновременно.

- Система должна обеспечивать любое количество одновременно работающих пользоватлей.

### 3.4.3 Требование к вычислительны ресурсам и дисковому пространству.

- Дисковое пространство должно масштабироваться в зависимости от требуемого пространства для хранения данных пользователей. От предоставленного пространства зависит стоимость продукта.

- Вычислительные ресурсы (процессорное время и опративная память) должны масштабироваться в зависимости от количества активных устройств и пользоватлей. От потребления ресурсов зависит стоимость продукта.

## 4. Use-Case View
*[Данный раздел содержит описание основных сценариев использования системы разными типами пользователей. Включите сюда необходимые диаграммы, указанные в п.2, приведите краткое описание каждой диаграммы.]*  
  
В этом разделе перечислены варианты использования или сценарии из модели вариантов использования, которые представляют некоторые важные центральные функции окончательной системы. На следующих диаграммах показаны варианты использования в системе:  

Примеры использования Civilla:
* Регистрировать гражданина. 
* Просмотривать данные гражданина. 
* Просматривать данные всех граждан и полицейских полицейским.  
* Анализ своего психопаспорта. 
* Редактировать свои данных. 
* Панель управления полиции.  
* Получить оповещение о высоком уровне психопасспорта. 
* Регистрировать устройства. 
* Получать уведомление о высоком уровне психопаспорта неизвестного от устройств. 
* Просмотривать список зарегестрированных камер и доминаторов.  
* Получить доступ к камере.  
* Получить контроль к доминутору.  

## 4.1 Architecturally-Significant Use Cases    
    
![Диаграмма прецедента)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al_use_cases_new/docs/pics/fill_my_data/fill%20my%20data.png)  
Рисунок 1 - Регистрация гражданина.  
![Диаграмма прецедента)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al_use_cases_new/docs/pics/view_my_data/new%20View%20my%20data.png)  
Рисунок 2 - Просмотр своих данных гражданина.  
![Диаграмма прецедента)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al_use_cases_new/docs/pics/view_data_by_cop/view_data_by_cop.png)  
Рисунок 3 - Полицейский просматривает данные всех граждан и полицейских.  
![Диаграмма прецедента)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al_use_cases_new/docs/pics/view_psyhopassport/view_psyhopasport.png)  
Рисунок 4 - Анализ своего психопаспорта.  
![EditData)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al_use_cases_new/docs/pics/edit_data/edit_data.png)  
Рисунок 5 - Редактирование своих данных.  
![EditData)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al_use_cases_new/docs/pics/police_control_panel/police_control_panel.png)  
Рисунок 6 - Панель управления полиции.  
![Notification)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al_use_cases_new/docs/pics/notifications/notification.png)  
Рисунок 7 - Получить оповещение о высоком уровне психопасспорта.  
![Диаграмма прецедента)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al_use_cases_new/docs/pics/register_device/register_device.png)  
Рисунок 8 - Регистрация устройства.  
![Notification)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al_use_cases_new/docs/pics/device_notifications/notifications_device.png)  
Рисунок 9 - Получить уведомление о высоком уровне психопаспорта неизвестного от устройств.  
![ViewDevices)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al_use_cases_new/docs/pics/view_devices/view_devices.png)  
Рисунок 10 - Просмотреть список зарегестрированных камер и доминаторов.  
![Диаграмма прецедента)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al_use_cases_new/docs/pics/request_acces_cameras/access_cameras_1.png)  
Рисунок 11 - Получить доступ к камере.  
![Диаграмма прецедента)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al_use_cases_new/docs/pics/request_access/request%20access_1.png)  
Рисунок 12 - Получить контроль к доминутору.    
  


*4.1.1 Регистрация гражданина  
Краткое описание:* Гражданин, подключившийся к системе Civilla заполняет специальную форму своих личных данных для дальшейшей обработки.  

*4.1.2 Просмотр своих данных гражданина.   
Краткое описание:* Гражданин, подключившийся к системе Civilla заполняет специальную форму своих личных данных для дальшейшей обработки.    

*4.1.3 Полицейский просматривает данные всех граждан и полицейских.   
Краткое описание:* Полицейский просматривает данные всех граждан и полицейских.  

*4.1.4 Анализ своего психопаспорта.  
Краткое описание:* Описывает процесс просмотра своего психопаспорта.  

*4.1.5 Редактирование своих данных.   
Краткое описание:* Изменить свои данные в системе Civilla  

*4.1.6 Панель управления полиции.    
Краткое описание:* Получить доступ ко всем функциям доступные полицескому.  

*4.1.7 Получить оповещение о высоком уровне психопасспорта.  
Краткое описание:* Получить оповещение о высоком уровне психопасспорта гражданина или полицейского  

*4.1.8 Регистрация устройства.  
Краткое описание:* Полицейский регистрирует новую камеру или доминатор к системе Civilla  

*4.1.9 Получить уведомление о высоком уровне психопаспорта неизвестного от устройств.   
Краткое описание:* Получить уведомление о высоком уровне психопаспорта неизвестного от устройств  

*4.1.10 Просмотреть список зарегестрированных камер и доминаторов.  
Краткое описание:* Просмотреть список зарегестрированных камер и доминаторов.  

*4.1.11 Получить доступ к камере.  
Краткое описание:* Получить доступ к камере.  

*4.1.12 Получить контроль к доминутору.  
Краткое описание:* Полицейский получает доступ к доминатору для его использования.  

  
### 4.2 Class Diagramm  

#### Прецедент пользователь отправляет сообщение в чат (нажимает кнопку), чтобы посмотреть свои данные
  
  ![Диаграмма)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al-software-architecture-document/docs/pics/main_class_diagram_PoliceControlServer.png)
  
### 4.3 Activity Diagram  
  
#### 4.3.1 Редактирование своих данных психопаспорта
  ![АктивитиДиаграмма)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al-software-architecture-document/docs/pics/activity%20diagram%20редактирование.png)  
  
### 4.4 State Machine Diagram  
  
#### 4.4.1 Регистрация устройства доминатор
  ![Диаграмма состояний)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al-software-architecture-document/docs/pics/state%20machine%20diagram.png) 
  
### 4.5 Sequence Diagram 
  
#### 4.5.1 Регистрация гражданина в систему
  ![ДиаграммаПоследовательности)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al-software-architecture-document/docs/pics/sequence%20diagram%201.png) 
  
### 4.6 Cooperative Diagram
  
#### 4.6.1 Анализ психопаспорта
  ![ДиаграммаКоммуникации)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al-software-architecture-document/docs/pics/cooperative%20diagram%201.png)
  
## 5. Logical View
*[Данный раздел содержит описание слоев, на которые делится приложение, а также интерфейсов их взаимодействия. Приведите описание каждого из слоев, как они связаны между собой, их назначение. Включите сюда необходимые диаграммы, указанные в п.2, приведите краткое описание каждой диаграммы.]*  
  
### 5.1 Package Diagram  
  ![ПакаджДиаграмма)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al-software-architecture-document/docs/pics/PackageDiagram1.png)

### 5.2 Class Diagram  

#### Прецедент пользователь отправляет сообщение в чат (нажимает кнопку), чтобы посмотреть свои данные
    
  ![КлассДиаграммаПолисКонтрольСервер)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al-software-architecture-document/docs/pics/BotCmd.png) 
  ![КлассДиаграммаПолисКонтрольСервер)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al-software-architecture-document/docs/pics/main_class_diagram_PoliceControlServer.png)  
  ![ПолнаяКлассДиаграммаПолисКонтрольСервер)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al-software-architecture-document/docs/pics/classdiagram_1_PoliceControlServer.png)
  
### 5.3 Activity Diagram
  
#### 5.3.1 Редактирование своих данных психопаспорта
  ![АктивитиДиаграмма)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al-software-architecture-document/docs/pics/activity%20diagram%202.png) 
  
### 5.4 State Machine Diagram  
  
#### 5.4.1 Регистрация устройства доминатор
  ![ДиаграммаCостояний)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al-software-architecture-document/docs/pics/State%20machine%20diagram%202.png) 
  
### 5.5 Sequence Diagram 
  
#### 5.5.1 Регистрация гражданина в систему
  ![ДиаграммаПоследовательности)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al-software-architecture-document/docs/pics/sequence%20diagram%204.png) 
  
### 5.6 Cooperative Diagram
  
#### 5.6.1 Анализ психопаспорта
  ![ДиаграммаКоммуникации)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al-software-architecture-document/docs/pics/cooperative%20diagram%202.png)
  
  
## 6. Implementation View
*[Данный раздел содержит описание системы в уже реализованном виде. Включите сюда необходимые диаграммы, указанные в п.2, приведите краткое описание каждой диаграммы.]*
  
  ### 6.1 Class Diagram  

#### Прецедент пользователь отправляет сообщение в чат (нажимает кнопку), чтобы посмотреть свои данные
  ![КлассДиаграмма)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al-software-architecture-document/docs/pics/BotCMD%202.png) 
  ![КлассДиаграммаПолисКонтрольСервер)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al-software-architecture-document/docs/pics/more_main_class_diagram_PoliceControlServer.png) 
  ![ПолнаяКлассДиаграммаПолисКонтрольСервер)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al-software-architecture-document/docs/pics/classdiagramPoliceControlServer.png)  
  
### 6.2 Activity Diagram
  
#### 6.2.1 Редактирование своих данных психопаспорта
  ![АктивитиДиаграмма)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al-software-architecture-document/docs/pics/activity%20diagram%203.png) 
  
### 6.3 Database Diagram  
  ![ДатабэйсДиаграмма)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al-software-architecture-document/docs/pics/database%20diagram.png) 
  
### 6.4 State Machine Diagram  
  
#### 6.4.1 Регистрация устройства доминатор
  ![ДиаграммаСостояний)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al-software-architecture-document/docs/pics/State%20machine%20diagram%203.png) 
  
### 6.5 Sequence Diagram 
  
#### 6.5.1 Регистрация гражданина в систему
  ![ДиаграммаПоследовательности)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al-software-architecture-document/docs/pics/sequence%20diagram%203.png)
  
### 6.6 Cooperative Diagram
  
#### 6.6.1 Анализ психопаспорта
  ![ДиаграммаКоммуникации)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al-software-architecture-document/docs/pics/cooperative%20diagram%203.png)
  
## 7. Deployment View
*[Данный раздел содержит описание конфигурации файлов, из которых состоит система, мест их расположения и описание взаимодействия их друг с другом. Включите сюда необходимые диаграммы, указанные в п.2, приведите краткое описание каждой диаграммы.]*  
  
![ДеплойментДиаграмма)](https://github.com/FF220v/ITMO-Psychopass-Team/blob/al-software-architecture-document/docs/pics/DeploymentDiagram.png) 
  
## 8. Implementation View
*[Данный раздел содержит описание системы в уже реализованном виде. Включите сюда необходимые диаграммы, указанные в п.2, приведите краткое описание каждой диаграммы.]*  
  
## 9. Size and Performance (Производительность)
*[Данный раздел описывает основные характеристики измерения производительности системы и их границы, которые могут оказать влияние на архитектуру,]*

## 10. Quality (Качество)
*[Данный раздел описывает, каким образом архитектура системы удовлетворяет её показателям качества - масштабируемости, надежности, мобильности, безопасности и т.д.]*






